<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Document</title>
    <style>
        html {
            zoom: 100%; /* Zoom seviyesini %100 olarak ayarla */
        }
        #checkVerified {
            margin: 20px;
            padding: 10px 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <button id="authButton">Authenticate with Telegram</button>
    <button id="checkVerified">Doğrula</button>
    <script src="script.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="moment-with-locales.js"></script>
    <script>
        const button = document.getElementById('checkVerified')

        Telegram.WebApp.ready();
        const userId = Telegram.WebApp.initDataUnsafe.user.id;
        button.addEventListener('click', async () => {
            try {
                const response = await fetch(`http://127.0.0.1:8000/conecctions/verify?telegramid=${userId}`,{
                    headers: {
                    'Content-Type': 'application/json'
                    }
                });
                
                const data = await response.json();
                console.log(data); // Sunucudan gelen yanıtı konsola yazdır

            } catch (error) {
                console.error('Error:', error); // Hata durumunda konsola yazdır
            }
        });



    </script>


    <script type="text/javascript">
        document.getElementById('authButton').addEventListener('click', function() {
            var redirectUrl = "https://oauth.telegram.org/auth?bot_id=7120438953&origin=https%3A%2F%2Fedc0-78-177-176-29.ngrok-free.app&request_access=write&return_to=https%3A%2F%2Fedc0-78-177-176-29.ngrok-free.app%2Fconnections%2Fconnect";
            window.location.href = redirectUrl;
        });
    </script>


</body>